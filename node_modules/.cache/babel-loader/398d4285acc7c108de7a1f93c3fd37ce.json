{"ast":null,"code":"var _jsxFileName = \"/home/spinny/react/lime-assign/src/App.js\";\nimport React, { Suspense, lazy, Component } from 'react';\nimport { urlList } from \"./constants\";\nimport axios from \"axios\";\nimport \"./App.css\";\nconst Cards = lazy(() => import('./cards'));\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: []\n    };\n\n    this.trackScrolling = () => {\n      const wrappedElement = document.getElementById('root');\n\n      if (this.isBottom(wrappedElement)) {\n        this.getData(); //document.removeEventListener('scroll', this.trackScrolling);\n      }\n    };\n  }\n\n  getOData() {\n    var a;\n\n    for (let i = 0; i < 10; i++) {\n      a = this.setNextUrl();\n    }\n  }\n\n  async getData() {\n    let calls = await Promise.all([this.setNextUrl(), this.setNextUrl(), this.setNextUrl(), this.setNextUrl(), this.setNextUrl(), this.setNextUrl()]);\n  }\n\n  setNextUrl() {\n    var x = Math.floor(Math.random() * urlList.length);\n    axios.get(urlList[x]).then(res => {\n      if (res.data.url === undefined && res.data.image !== undefined) {\n        if (this.checkUrl(res.data.image)) {\n          this.setState({\n            items: [...this.state.items, res.data.image]\n          });\n        } else {\n          this.setNextUrl();\n        }\n      } else if (res.data.image === undefined && res.data.url !== undefined) {\n        if (this.checkUrl(res.data.url)) {\n          this.setState({\n            items: [...this.state.items, res.data.url]\n          });\n        } else {\n          this.setNextUrl();\n        }\n      }\n    });\n  }\n\n  checkUrl(url) {\n    var mediaType = url.trim().slice(url.length - 3, url.length);\n\n    if (mediaType === \"mp4\" || mediaType === \"ebm\") {\n      return false;\n    }\n\n    if (this.state.items.includes(url)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight + 150;\n  }\n\n  componentDidMount() {\n    this.getData();\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  render() {\n    const loadingImg = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"album-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"loading\",\n      src: \"https://media.giphy.com/media/y1ZBcOGOOtlpC/200.gif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }));\n    const items = this.state.items.map(item => {\n      return /*#__PURE__*/React.createElement(Suspense, {\n        key: item,\n        fallback: loadingImg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Cards, {\n        image: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, items));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/spinny/react/lime-assign/src/App.js"],"names":["React","Suspense","lazy","Component","urlList","axios","Cards","App","state","items","trackScrolling","wrappedElement","document","getElementById","isBottom","getData","getOData","a","i","setNextUrl","calls","Promise","all","x","Math","floor","random","length","get","then","res","data","url","undefined","image","checkUrl","setState","mediaType","trim","slice","includes","el","getBoundingClientRect","bottom","window","innerHeight","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","loadingImg","map","item"],"mappings":"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","sourcesContent":["import React, { Suspense, lazy, Component } from 'react';\nimport {urlList} from \"./constants\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nconst Cards = lazy(() => import('./cards'));\n\n\nclass App extends Component {\n  state = {\n    items: [],\n  };\n\n  getOData(){\n    var a;\n    for(let i=0;i<10;i++){\n       a = this.setNextUrl();\n    }\n  }\n  async getData(){\n    let calls = await Promise.all([\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl()\n  ]);\n  }\n  setNextUrl(){\n    var x = Math.floor((Math.random() * urlList.length) );\n    axios\n      .get(urlList[x])\n      .then(res => {\n        if(res.data.url===undefined && res.data.image!==undefined){\n          if(this.checkUrl(res.data.image)){\n            this.setState({ items: [...this.state.items,res.data.image] });\n          }\n          else{\n            this.setNextUrl();\n          }\n        }        \n        else if(res.data.image===undefined && res.data.url!==undefined){\n          if(this.checkUrl(res.data.url)){\n            this.setState({ items: [...this.state.items,res.data.url] });\n          }\n          else{\n            this.setNextUrl();\n          }\n        }\n      });\n  }\n  checkUrl(url){\n    var mediaType = url.trim().slice(url.length-3,url.length);\n    if(mediaType===\"mp4\" || mediaType===\"ebm\"){\n      return false;\n    }\n    if(this.state.items.includes(url)){\n      return false;\n    }\n    return true;\n  }\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight+150;\n  }\n\n  componentDidMount() {\n    this.getData();\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  trackScrolling = () => {\n    const wrappedElement = document.getElementById('root');\n    if (this.isBottom(wrappedElement)) {\n      this.getData();\n      //document.removeEventListener('scroll', this.trackScrolling);\n    }\n  };\n\n  render() {\n    const loadingImg = <div className=\"album-img\">\n      <img alt=\"loading\" src=\"https://media.giphy.com/media/y1ZBcOGOOtlpC/200.gif\" />\n    </div>\n\n    const items = this.state.items.map(item => {\n      return (\n        <Suspense key={item} fallback={loadingImg}>\n          <Cards image={item} />\n        </Suspense>\n      );\n    });\n\n    return (\n      <div className=\"app\">\n        <div className=\"card-list\">\n          {items}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}