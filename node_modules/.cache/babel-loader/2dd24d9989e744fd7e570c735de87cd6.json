{"ast":null,"code":"import _toConsumableArray from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/spinny/Desktop/git Projects/random-load/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Suspense,lazy,Component}from'react';import{urlList}from\"./constants\";import axios from\"axios\";import\"./App.css\";var Cards=lazy(function(){return import('./cards');});var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={items:[]};_this.trackScrolling=function(){var wrappedElement=document.getElementById('root');if(_this.isBottom(wrappedElement)){_this.getData();//document.removeEventListener('scroll', this.trackScrolling);\n}};return _this;}_createClass(App,[{key:\"getOData\",value:function getOData(){var a;for(var i=0;i<6;i++){a=this.setNextUrl();}}},{key:\"getData\",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var calls;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([this.setNextUrl(),this.setNextUrl(),this.setNextUrl(),this.setNextUrl(),this.setNextUrl(),this.setNextUrl()]);case 2:calls=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee,this);}));function getData(){return _getData.apply(this,arguments);}return getData;}()},{key:\"setNextUrl\",value:function setNextUrl(){var _this2=this;var x=Math.floor(Math.random()*urlList.length);axios.get(urlList[x]).then(function(res){if(res.data.url===undefined&&res.data.image!==undefined){if(_this2.checkUrl(res.data.image)){_this2.setState({items:[].concat(_toConsumableArray(_this2.state.items),[res.data.image])});}else{_this2.setNextUrl();}}else if(res.data.image===undefined&&res.data.url!==undefined){if(_this2.checkUrl(res.data.url)){_this2.setState({items:[].concat(_toConsumableArray(_this2.state.items),[res.data.url])});}else{_this2.setNextUrl();}}});}},{key:\"checkUrl\",value:function checkUrl(url){var mediaType=url.trim().slice(url.length-3,url.length);if(mediaType===\"mp4\"||mediaType===\"ebm\"){return false;}if(this.state.items.includes(url)){return false;}return true;}},{key:\"isBottom\",value:function isBottom(el){return el.getBoundingClientRect().bottom<=window.innerHeight+150;}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData();document.addEventListener('scroll',this.trackScrolling);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('scroll',this.trackScrolling);}},{key:\"render\",value:function render(){var loadingImg=/*#__PURE__*/React.createElement(\"div\",{className:\"album-img\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"loading\",src:\"https://media.giphy.com/media/y1ZBcOGOOtlpC/200.gif\"}));var items=this.state.items.map(function(item){return/*#__PURE__*/React.createElement(Suspense,{key:item,fallback:loadingImg},/*#__PURE__*/React.createElement(Cards,{image:item}));});return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-list\"},items));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/spinny/Desktop/git Projects/random-load/src/App.js"],"names":["React","Suspense","lazy","Component","urlList","axios","Cards","App","state","items","trackScrolling","wrappedElement","document","getElementById","isBottom","getData","a","i","setNextUrl","Promise","all","calls","x","Math","floor","random","length","get","then","res","data","url","undefined","image","checkUrl","setState","mediaType","trim","slice","includes","el","getBoundingClientRect","bottom","window","innerHeight","addEventListener","removeEventListener","loadingImg","map","item"],"mappings":"inCAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,IAA1B,CAAgCC,SAAhC,KAAiD,OAAjD,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CAEA,GAAMC,CAAAA,KAAK,CAAGJ,IAAI,CAAC,iBAAM,QAAO,SAAP,CAAN,EAAD,CAAlB,C,GAGMK,CAAAA,G,+SACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,C,OAkERC,c,CAAiB,UAAM,CACrB,GAAMC,CAAAA,cAAc,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAvB,CACA,GAAI,MAAKC,QAAL,CAAcH,cAAd,CAAJ,CAAmC,CACjC,MAAKI,OAAL,GACA;AACD,CACF,C,0EApES,CACR,GAAIC,CAAAA,CAAJ,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAAC,CAAd,CAAgBA,CAAC,EAAjB,CAAoB,CACjBD,CAAC,CAAG,KAAKE,UAAL,EAAJ,CACF,CACF,C,0QAEmBC,CAAAA,OAAO,CAACC,GAAR,CAAY,CAC9B,KAAKF,UAAL,EAD8B,CAE9B,KAAKA,UAAL,EAF8B,CAG9B,KAAKA,UAAL,EAH8B,CAI9B,KAAKA,UAAL,EAJ8B,CAK9B,KAAKA,UAAL,EAL8B,CAM9B,KAAKA,UAAL,EAN8B,CAAZ,C,QAAdG,K,wMASM,iBACV,GAAIC,CAAAA,CAAC,CAAGC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,GAAgBrB,OAAO,CAACsB,MAApC,CAAR,CACArB,KAAK,CACFsB,GADH,CACOvB,OAAO,CAACkB,CAAD,CADd,EAEGM,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACX,GAAGA,GAAG,CAACC,IAAJ,CAASC,GAAT,GAAeC,SAAf,EAA4BH,GAAG,CAACC,IAAJ,CAASG,KAAT,GAAiBD,SAAhD,CAA0D,CACxD,GAAG,MAAI,CAACE,QAAL,CAAcL,GAAG,CAACC,IAAJ,CAASG,KAAvB,CAAH,CAAiC,CAC/B,MAAI,CAACE,QAAL,CAAc,CAAE1B,KAAK,8BAAM,MAAI,CAACD,KAAL,CAAWC,KAAjB,GAAuBoB,GAAG,CAACC,IAAJ,CAASG,KAAhC,EAAP,CAAd,EACD,CAFD,IAGI,CACF,MAAI,CAACf,UAAL,GACD,CACF,CAPD,IAQK,IAAGW,GAAG,CAACC,IAAJ,CAASG,KAAT,GAAiBD,SAAjB,EAA8BH,GAAG,CAACC,IAAJ,CAASC,GAAT,GAAeC,SAAhD,CAA0D,CAC7D,GAAG,MAAI,CAACE,QAAL,CAAcL,GAAG,CAACC,IAAJ,CAASC,GAAvB,CAAH,CAA+B,CAC7B,MAAI,CAACI,QAAL,CAAc,CAAE1B,KAAK,8BAAM,MAAI,CAACD,KAAL,CAAWC,KAAjB,GAAuBoB,GAAG,CAACC,IAAJ,CAASC,GAAhC,EAAP,CAAd,EACD,CAFD,IAGI,CACF,MAAI,CAACb,UAAL,GACD,CACF,CACF,CAnBH,EAoBD,C,0CACQa,G,CAAI,CACX,GAAIK,CAAAA,SAAS,CAAGL,GAAG,CAACM,IAAJ,GAAWC,KAAX,CAAiBP,GAAG,CAACL,MAAJ,CAAW,CAA5B,CAA8BK,GAAG,CAACL,MAAlC,CAAhB,CACA,GAAGU,SAAS,GAAG,KAAZ,EAAqBA,SAAS,GAAG,KAApC,CAA0C,CACxC,MAAO,MAAP,CACD,CACD,GAAG,KAAK5B,KAAL,CAAWC,KAAX,CAAiB8B,QAAjB,CAA0BR,GAA1B,CAAH,CAAkC,CAChC,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CACD,C,0CACQS,E,CAAI,CACX,MAAOA,CAAAA,EAAE,CAACC,qBAAH,GAA2BC,MAA3B,EAAqCC,MAAM,CAACC,WAAP,CAAmB,GAA/D,CACD,C,6DAEmB,CAClB,KAAK7B,OAAL,GACAH,QAAQ,CAACiC,gBAAT,CAA0B,QAA1B,CAAoC,KAAKnC,cAAzC,EACD,C,mEAEsB,CACrBE,QAAQ,CAACkC,mBAAT,CAA6B,QAA7B,CAAuC,KAAKpC,cAA5C,EACD,C,uCAUQ,CACP,GAAMqC,CAAAA,UAAU,cAAG,2BAAK,SAAS,CAAC,WAAf,eACjB,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAC,qDAAvB,EADiB,CAAnB,CAIA,GAAMtC,CAAAA,KAAK,CAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiBuC,GAAjB,CAAqB,SAAAC,IAAI,CAAI,CACzC,mBACE,oBAAC,QAAD,EAAU,GAAG,CAAEA,IAAf,CAAqB,QAAQ,CAAEF,UAA/B,eACE,oBAAC,KAAD,EAAO,KAAK,CAAEE,IAAd,EADF,CADF,CAKD,CANa,CAAd,CAQA,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,WAAf,EACGxC,KADH,CADF,CADF,CAOD,C,iBA/FeN,S,EAkGlB,cAAeI,CAAAA,GAAf","sourcesContent":["import React, { Suspense, lazy, Component } from 'react';\nimport {urlList} from \"./constants\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nconst Cards = lazy(() => import('./cards'));\n\n\nclass App extends Component {\n  state = {\n    items: [],\n  };\n\n  getOData(){\n    var a;\n    for(let i=0;i<6;i++){\n       a = this.setNextUrl();\n    }\n  }\n  async getData(){\n    let calls = await Promise.all([\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl(),\n    this.setNextUrl()\n  ]);\n  }\n  setNextUrl(){\n    var x = Math.floor((Math.random() * urlList.length) );\n    axios\n      .get(urlList[x])\n      .then(res => {\n        if(res.data.url===undefined && res.data.image!==undefined){\n          if(this.checkUrl(res.data.image)){\n            this.setState({ items: [...this.state.items,res.data.image] });\n          }\n          else{\n            this.setNextUrl();\n          }\n        }        \n        else if(res.data.image===undefined && res.data.url!==undefined){\n          if(this.checkUrl(res.data.url)){\n            this.setState({ items: [...this.state.items,res.data.url] });\n          }\n          else{\n            this.setNextUrl();\n          }\n        }\n      });\n  }\n  checkUrl(url){\n    var mediaType = url.trim().slice(url.length-3,url.length);\n    if(mediaType===\"mp4\" || mediaType===\"ebm\"){\n      return false;\n    }\n    if(this.state.items.includes(url)){\n      return false;\n    }\n    return true;\n  }\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight+150;\n  }\n\n  componentDidMount() {\n    this.getData();\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  trackScrolling = () => {\n    const wrappedElement = document.getElementById('root');\n    if (this.isBottom(wrappedElement)) {\n      this.getData();\n      //document.removeEventListener('scroll', this.trackScrolling);\n    }\n  };\n\n  render() {\n    const loadingImg = <div className=\"album-img\">\n      <img alt=\"loading\" src=\"https://media.giphy.com/media/y1ZBcOGOOtlpC/200.gif\" />\n    </div>\n\n    const items = this.state.items.map(item => {\n      return (\n        <Suspense key={item} fallback={loadingImg}>\n          <Cards image={item} />\n        </Suspense>\n      );\n    });\n\n    return (\n      <div className=\"app\">\n        <div className=\"card-list\">\n          {items}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}